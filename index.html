<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Bookmark Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="manifest" href="/manifest.json">
  <style>
    /* ===== CSS VARIABLES ===== */
    :root {
      --primary: #10b981;
      --primary-dark: #059669;
      --primary-light: #d1fae5;
      --secondary: #3b82f6;
      --danger: #ef4444;
      --warning: #f59e0b;
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --text: #1e293b;
      --text-light: #64748b;
      --text-lighter: #94a3b8;
      --border: #e2e8f0;
      --border-light: #f1f5f9;
      --sidebar-width: 200px;
      --radius-sm: 0.375rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      line-height: 1.5;
    }

    /* ===== ACCESSIBILITY ===== */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
      width: var(--sidebar-width);
      background-color: var(--card-bg);
      border-right: 1px solid var(--border);
      flex-shrink: 0;
      height: 100vh;
      position: sticky;
      top: 0;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease;
      z-index: 1000;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .logo-icon {
      background: linear-gradient(135deg, var(--primary-dark), var(--text));
      color: rgb(247, 247, 247);
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
      line-height: 1.2;
    }

    .logo-title {
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--text);
    }

    .logo-subtitle {
      font-size: 0.875rem;
      color: var(--text-light);
    }

    .nav-section {
      padding: 1.5rem;
    }

    .nav-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-lighter);
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .nav-links {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .nav-links a {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      color: var(--text);
      text-decoration: none;
      border-radius: var(--radius-md);
      transition: all 0.2s ease;
    }

    .nav-links a:hover {
      background-color: var(--bg);
      color: var(--primary);
    }

    .nav-links a.active {
      background-color: var(--primary-light);
      color: var(--primary);
      font-weight: 600;
    }

    .nav-links i {
      width: 20px;
      text-align: center;
    }

    .tags-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .tag-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.625rem 0.75rem;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }

    .tag-item:hover {
      background-color: var(--bg);
    }

    .tag-item.active {
      background-color: var(--primary-light);
      color: var(--primary);
      font-weight: 600;
    }

    .tag-name {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .tag-name::before {
      content: "";
      width: 12px;
      height: 12px;
      border-radius: 2px;
      background-color: var(--border);
      display: inline-block;
    }

    .tag-item.active .tag-name::before {
      background-color: var(--primary);
    }

    .tag-count {
      background-color: var(--primary);
      color: white;
      font-size: 0.75rem;
      padding: 0.125rem 0.5rem;
      border-radius: 999px;
      min-width: 24px;
      text-align: center;
    }

    /* ===== MAIN CONTENT ===== */
    .main-content {
      flex: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .header {
      background-color: var(--card-bg);
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .search-container {
      position: relative;
      max-width: 500px;
    }

    .search-input {
      width: 100%;
      padding: 0.875rem 1rem 0.875rem 3rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      font-size: 1rem;
      background-color: var(--bg);
      transition: all 0.2s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-lighter);
    }

    .content-header {
      padding: 1.5rem 2rem;
      background-color: var(--card-bg);
      border-bottom: 1px solid var(--border);
    }

    .content-header h1 {
      font-size: 1.5rem;
      color: var(--text);
      margin-bottom: 0.25rem;
    }

    .bookmark-count {
      color: var(--text-light);
      font-size: 0.875rem;
    }

    /* ===== BOOKMARKS GRID ===== */
    .bookmarks-container {
      flex: 1;
      padding: 1.5rem;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      align-content: start;
    }

    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 4rem 2rem;
      color: var(--text-light);
    }

    .empty-state i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--border);
    }

    .bookmark-card {
      background-color: var(--card-bg);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .bookmark-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-light);
    }

    .bookmark-card.selected {
      border-color: var(--primary);
      background: linear-gradient(to right, var(--primary-light) 4px, white 4px);
    }

    .selection-checkbox {
      position: absolute;
      top: 1rem;
      left: 1rem;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      background: white;
      cursor: pointer;
      display: none;
      z-index: 2;
    }

    .selection-checkbox.checked {
      background: var(--primary);
      border-color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .selection-checkbox.checked::after {
      content: "✓";
      color: white;
      font-size: 14px;
      font-weight: bold;
    }

    .selection-mode .selection-checkbox {
      display: block;
    }

    .selection-mode .selection-checkbox:not(.checked) {
      display: block;
    }

    .bookmark-header {
      padding: 1.25rem 1.25rem 0.75rem;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      border-bottom: 1px solid var(--border-light);
    }

    .bookmark-favicon {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-md);
      background-color: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .bookmark-favicon img {
      width: 24px;
      height: 24px;
      object-fit: contain;
    }

    .bookmark-info {
      flex: 1;
      min-width: 0;
    }

    .bookmark-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .bookmark-url {
      color: var(--secondary);
      font-size: 0.875rem;
      text-decoration: none;
      display: inline-block;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .bookmark-url:hover {
      text-decoration: underline;
    }

    .bookmark-actions {
      margin-left: auto;
    }

    .action-menu {
      background: none;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-light);
      transition: all 0.2s ease;
    }

    .action-menu:hover {
      background-color: var(--bg);
      color: var(--text);
    }

    .bookmark-description {
      padding: 1rem 1.25rem;
      color: var(--text-light);
      font-size: 0.9375rem;
      line-height: 1.5;
      flex: 1;
    }

    .bookmark-tags {
      padding: 0.75rem 1.25rem;
      border-top: 1px solid var(--border-light);
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .bookmark-tag {
      background-color: var(--bg);
      color: var(--text-light);
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .bookmark-tag:hover {
      background-color: var(--primary-light);
      color: var(--primary);
      border-color: var(--primary);
    }

    .bookmark-footer {
      padding: 0.75rem 1.25rem;
      border-top: 1px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .bookmark-stats {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: var(--text-lighter);
      font-size: 0.875rem;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    .footer-actions {
      display: flex;
      gap: 0.5rem;
    }

    .footer-btn {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background-color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-light);
      transition: all 0.2s ease;
    }

    .footer-btn:hover {
      background-color: var(--bg);
      color: var(--text);
    }

    .footer-btn.active {
      background-color: var(--primary-light);
      color: var(--primary);
      border-color: var(--primary);
    }

    /* ===== FLOATING ACTION BUTTON ===== */
    .fab-button {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }

    .fab-button:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
    }

    /* ===== QUICK ACTIONS ===== */
    .quick-actions {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 0.75rem 1.5rem;
      display: flex;
      gap: 1rem;
      box-shadow: var(--shadow-md);
      z-index: 99;
    }

    .action-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      cursor: pointer;
      color: var(--text);
      transition: all 0.2s ease;
      font-size: 0.875rem;
    }

    .action-btn:hover {
      background: var(--primary-light);
      border-color: var(--primary);
    }

    .action-btn.primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .action-btn.danger {
      background: var(--danger);
      color: white;
      border-color: var(--danger);
    }

    /* ===== BULK ACTIONS ===== */
    .bulk-actions {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--primary);
      color: white;
      padding: 1rem 2rem;
      display: none;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
    }

    .bulk-actions.active {
      display: flex;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }

    /* ===== MODALS ===== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 2rem;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-header {
      margin-bottom: 1.5rem;
    }

    .modal-header h2 {
      font-size: 1.5rem;
      color: var(--text);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text);
      font-weight: 500;
    }

    .form-control {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 1rem;
      transition: all 0.2s ease;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    .tag-input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.5rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      min-height: 44px;
      align-items: center;
    }

    .tag-pill {
      background: var(--primary-light);
      color: var(--primary);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .tag-pill .remove-tag {
      cursor: pointer;
      font-size: 0.75rem;
    }

    .tag-input {
      flex: 1;
      border: none;
      outline: none;
      min-width: 120px;
      padding: 0.25rem;
    }

    .modal-footer {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }

    /* ===== EXPORT OPTIONS ===== */
    .export-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin: 1.5rem 0;
    }

    .export-option {
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      padding: 1.5rem 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .export-option:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    .export-option.selected {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    /* ===== STATISTICS ===== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .stat-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0.5rem 0;
    }

    .tag-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .tag-cloud .bookmark-tag {
      font-size: 0.875rem;
      padding: 0.375rem 0.75rem;
      transition: all 0.2s ease;
    }

    .tag-cloud .bookmark-tag:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    /* ===== MOBILE RESPONSIVE ===== */
    .mobile-header {
      display: none;
      background-color: var(--card-bg);
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .mobile-menu-btn {
      background: none;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text);
    }

    .mobile-menu-btn:hover {
      background-color: var(--bg);
    }

    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 1024px) {
      .bookmarks-container {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      
      .mobile-header {
        display: flex;
      }
      
      .sidebar {
        position: fixed;
        left: -100%;
        top: 0;
        height: 100vh;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: var(--shadow-lg);
      }
      
      .sidebar.active {
        left: 0;
      }
      
      .sidebar-overlay.active {
        display: block;
      }
      
      .header {
        padding: 1rem;
      }
      
      .content-header, .bookmarks-container {
        padding: 1rem;
      }
      
      .bookmarks-container {
        grid-template-columns: 1fr;
      }
      
      .quick-actions {
        bottom: 5rem;
        padding: 0.5rem 1rem;
      }
      
      .fab-button {
        bottom: 6rem;
        right: 1rem;
      }
      
      .export-options {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .bookmark-header {
        flex-direction: column;
        gap: 0.75rem;
      }
      
      .bookmark-actions {
        align-self: flex-end;
      }
      
      .bookmark-footer {
        flex-direction: column;
        gap: 0.75rem;
        align-items: stretch;
      }
      
      .footer-actions {
        justify-content: center;
      }
      
      .bulk-actions {
        padding: 1rem;
        flex-direction: column;
        gap: 1rem;
      }
      
      .bulk-buttons {
        display: flex;
        gap: 0.5rem;
      }
    }

    /* ===== UTILITY CLASSES ===== */
    .text-truncate {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .flex-1 {
      flex: 1;
    }

    .gap-1 { gap: 0.25rem; }
    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .gap-4 { gap: 1rem; }

    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-3 { margin-top: 0.75rem; }
    .mt-4 { margin-top: 1rem; }

    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-4 { margin-bottom: 1rem; }

    .text-center { text-align: center; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <!-- Mobile Header -->
  <div class="mobile-header">
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open menu">
      <i class="fas fa-bars"></i>
    </button>
    <div class="logo">
      <div class="logo-icon">
        <i class="fas fa-bookmark"></i>
      </div>
      <div class="logo-text">
        <span class="logo-title">MarkFlow</span>
      </div>
    </div>
    <div style="width: 44px;"></div>
  </div>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="logo">
      <div class="logo-icon">
        <i class="fas fa-bookmark"></i>
      </div>
      <div class="logo-text">
        <span class="logo-title">MarkSave</span>
        <span class="logo-subtitle">Bookmark Manager</span>
      </div>
    </div>
    
    <div class="nav-section">
      <ul class="nav-links">
        <li><a href="#" class="active" data-view="all"><i class="fas fa-home"></i> All Bookmarks</a></li>
        <li><a href="#" data-view="favorites"><i class="fas fa-star"></i> Favorites</a></li>
        <li><a href="#" data-view="archived"><i class="fas fa-archive"></i> Archived</a></li>
        <li><a href="#" data-view="recent"><i class="fas fa-history"></i> Recently Added</a></li>
      </ul>
    </div>
    
    <div class="nav-section">
      <h3 class="nav-title">Tags</h3>
      <div class="tags-container" id="tagsList">
        <!-- Tags will be dynamically generated -->
      </div>
    </div>
    
    <div class="nav-section mt-auto">
      <div class="nav-title">Storage</div>
      <div style="background-color: var(--bg); border-radius: var(--radius-md); padding: 1rem;">
        <div style="display: flex; justify-content: space-between; font-size: 0.875rem; margin-bottom: 0.5rem;">
          <span id="storageCount">0 bookmarks</span>
          <span id="storageSize">0 MB</span>
        </div>
        <div style="height: 6px; background-color: var(--border); border-radius: 999px; overflow: hidden;">
          <div id="storageBar" style="width: 0%; height: 100%; background: linear-gradient(to right, var(--primary), var(--secondary)); transition: width 0.3s ease;"></div>
        </div>
      </div>
    </div>
  </aside>
  
  <!-- Main Content -->
  <main class="main-content">
    <div class="header">
      <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" id="searchInput" placeholder="Search bookmarks by title, URL, or tag...">
      </div>
    </div>
    
    <div class="content-header">
      <h1 id="pageTitle">All Bookmarks</h1>
      <p class="bookmark-count" id="bookmarkCount">0 bookmarks</p>
    </div>

    <div class="bookmarks-container" id="bookmarksContainer">
      <!-- Bookmarks will be dynamically generated -->
      <div class="empty-state" id="emptyState">
        <i class="fas fa-bookmark"></i>
        <h3>No bookmarks yet</h3>
        <p>Add your first bookmark to get started!</p>
        <button class="action-btn primary mt-3" id="addFirstBookmark">
          <i class="fas fa-plus"></i> Add Bookmark
        </button>
      </div>
    </div>
  </main>

  <!-- Floating Action Button -->
  <button class="fab-button" id="addBookmarkBtn" aria-label="Add new bookmark">
    <i class="fas fa-plus"></i>
  </button>

  <!-- Quick Actions -->
  <div class="quick-actions" id="quickActions">
    <button class="action-btn" id="importBtn">
      <i class="fas fa-file-import"></i>
      <span>Import</span>
    </button>
    <button class="action-btn" id="exportBtn">
      <i class="fas fa-file-export"></i>
      <span>Export</span>
    </button>
    <button class="action-btn" id="selectBtn">
      <i class="fas fa-check-square"></i>
      <span>Select</span>
    </button>
  </div>

  <!-- Bulk Actions Bar -->
  <div class="bulk-actions" id="bulkActions">
    <div>
      <span id="selectedCount">0</span> bookmarks selected
    </div>
    <div class="bulk-buttons">
      <button class="action-btn" id="bulkFavoriteBtn">
        <i class="fas fa-star"></i>
        Favorite
      </button>
      <button class="action-btn" id="bulkArchiveBtn">
        <i class="fas fa-archive"></i>
        Archive
      </button>
      <button class="action-btn danger" id="bulkDeleteBtn">
        <i class="fas fa-trash"></i>
        Delete
      </button>
      <button class="action-btn" id="bulkCancelBtn">
        Cancel
      </button>
    </div>
  </div>

  <!-- Add/Edit Bookmark Modal -->
  <div class="modal" id="bookmarkModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Add New Bookmark</h2>
      </div>
      <form id="bookmarkForm">
        <div class="form-group">
          <label for="bookmarkTitle">Title *</label>
          <input type="text" id="bookmarkTitle" class="form-control" required placeholder="Enter bookmark title">
        </div>
        <div class="form-group">
          <label for="bookmarkUrl">URL *</label>
          <input type="url" id="bookmarkUrl" class="form-control" required placeholder="https://example.com">
        </div>
        <div class="form-group">
          <label for="bookmarkDescription">Description</label>
          <textarea id="bookmarkDescription" class="form-control" rows="3" placeholder="Brief description (optional)"></textarea>
        </div>
        <div class="form-group">
          <label>Tags</label>
          <div class="tag-input-container" id="tagInputContainer">
            <input type="text" class="tag-input" id="tagInput" placeholder="Type and press Enter...">
          </div>
          <div class="mt-2" id="suggestedTags"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="action-btn flex-1" id="cancelModal">Cancel</button>
          <button type="submit" class="action-btn primary flex-1" id="saveBookmark">Save Bookmark</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Export Modal -->
  <div class="modal" id="exportModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Export Bookmarks</h2>
      </div>
      <p>Choose export format:</p>
      
      <div class="export-options">
        <div class="export-option" data-format="html">
          <i class="fas fa-file-code fa-2x mb-2"></i>
          <div>HTML File</div>
          <small>Browser compatible</small>
        </div>
        <div class="export-option" data-format="json">
          <i class="fas fa-database fa-2x mb-2"></i>
          <div>JSON File</div>
          <small>Backup & API</small>
        </div>
        <div class="export-option" data-format="csv">
          <i class="fas fa-table fa-2x mb-2"></i>
          <div>CSV File</div>
          <small>Spreadsheets</small>
        </div>
        <div class="export-option" data-format="markdown">
          <i class="fab fa-markdown fa-2x mb-2"></i>
          <div>Markdown</div>
          <small>Documentation</small>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="action-btn flex-1" id="cancelExport">Cancel</button>
        <button class="action-btn primary flex-1" id="confirmExport">Export</button>
      </div>
    </div>
  </div>

  <!-- Statistics Modal -->
  <div class="modal" id="statsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Dashboard Statistics</h2>
      </div>
      <div class="stats-grid">
        <div class="stat-card">
          <i class="fas fa-bookmark fa-2x" style="color: var(--primary);"></i>
          <div class="stat-value" id="totalBookmarksStat">0</div>
          <div>Total Bookmarks</div>
        </div>
        <div class="stat-card">
          <i class="fas fa-star fa-2x" style="color: var(--warning);"></i>
          <div class="stat-value" id="favoriteBookmarksStat">0</div>
          <div>Favorites</div>
        </div>
        <div class="stat-card">
          <i class="fas fa-tags fa-2x" style="color: #8b5cf6;"></i>
          <div class="stat-value" id="totalTagsStat">0</div>
          <div>Unique Tags</div>
        </div>
        <div class="stat-card">
          <i class="fas fa-calendar fa-2x" style="color: var(--danger);"></i>
          <div class="stat-value" id="recentBookmarksStat">0</div>
          <div>Added This Week</div>
        </div>
      </div>
      
      <div class="mt-4">
        <h3>Most Used Tags</h3>
        <div class="tag-cloud" id="tagCloud">
          <!-- Tags will be populated here -->
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="action-btn flex-1" id="closeStats">Close</button>
      </div>
    </div>
  </div>

<script>
  // Bookmark Manager Core Application
  class BookmarkManager {
    constructor() {
      this.bookmarks = this.loadBookmarks();
      this.selectedBookmarks = new Set();
      this.currentView = 'all';
      this.currentFilter = 'all';
      this.searchQuery = '';
      this.editingBookmark = null;
      this.exportFormat = 'json';
      this.tags = new Set();
      this.initialize();
    }

    initialize() {
      this.setupEventListeners();
      this.renderBookmarks();
      this.updateTagsList();
      this.updateStats();
      this.setupDemoData();
    }

    loadBookmarks() {
      const saved = localStorage.getItem('markflow_bookmarks');
      if (saved) {
        return JSON.parse(saved);
      }
      return [];
    }

    saveBookmarks() {
      localStorage.setItem('markflow_bookmarks', JSON.stringify(this.bookmarks));
      this.updateStats();
      this.updateTagsList();
    }

    setupDemoData() {
      if (this.bookmarks.length === 0) {
        this.bookmarks = [
          {
            id: '1',
            title: 'Frontend Mentor',
            url: 'https://frontendmentor.io',
            description: 'Improve your front-end coding skills by building real projects.',
            tags: ['Practice', 'Learning', 'Community'],
            favorite: true,
            archived: false,
            visits: 47,
            added: new Date().toISOString().split('T')[0]
          },
          {
            id: '2',
            title: 'React Documentation',
            url: 'https://react.dev',
            description: 'The library for web and native user interfaces.',
            tags: ['JavaScript', 'Framework', 'Reference'],
            favorite: false,
            archived: false,
            visits: 0,
            added: new Date().toISOString().split('T')[0]
          },
          {
            id: '3',
            title: 'Claude AI Assistant',
            url: 'https://claude.ai',
            description: 'AI assistant for analysis, writing, coding, and creative tasks.',
            tags: ['AI', 'Tools', 'Learning'],
            favorite: true,
            archived: false,
            visits: 73,
            added: new Date().toISOString().split('T')[0]
          },
          {
            id: '4',
            title: 'Web.dev by Google',
            url: 'https://web.dev',
            description: 'Build modern web experiences that work on any browser.',
            tags: ['Performance', 'Learning', 'Tips'],
            favorite: false,
            archived: false,
            visits: 15,
            added: new Date().toISOString().split('T')[0]
          }
        ];
        this.saveBookmarks();
      }
    }

    getFilteredBookmarks() {
      let filtered = [...this.bookmarks];

      // Apply view filter
      switch(this.currentView) {
        case 'favorites':
          filtered = filtered.filter(b => b.favorite);
          break;
        case 'archived':
          filtered = filtered.filter(b => b.archived);
          break;
        case 'recent':
          const weekAgo = new Date();
          weekAgo.setDate(weekAgo.getDate() - 7);
          filtered = filtered.filter(b => new Date(b.added) > weekAgo);
          break;
      }

      // Apply tag filter
      if (this.currentFilter !== 'all') {
        filtered = filtered.filter(b => b.tags.includes(this.currentFilter));
      }

      // Apply search
      if (this.searchQuery) {
        const query = this.searchQuery.toLowerCase();
        filtered = filtered.filter(b => 
          b.title.toLowerCase().includes(query) ||
          b.url.toLowerCase().includes(query) ||
          b.description.toLowerCase().includes(query) ||
          b.tags.some(tag => tag.toLowerCase().includes(query))
        );
      }

      return filtered;
    }

    renderBookmarks() {
      const container = document.getElementById('bookmarksContainer');
      const bookmarks = this.getFilteredBookmarks();
      
      if (bookmarks.length === 0) {
        document.getElementById('emptyState').classList.remove('hidden');
        container.innerHTML = '<div class="empty-state" id="emptyState"><i class="fas fa-bookmark"></i><h3>No bookmarks found</h3><p>' + 
          (this.searchQuery ? 'Try a different search' : 'Add your first bookmark to get started!') + '</p></div>';
        return;
      }
      
      document.getElementById('emptyState').classList.add('hidden');
      
      container.innerHTML = bookmarks.map(bookmark => this.createBookmarkHTML(bookmark)).join('');
      
      // Update count
      document.getElementById('bookmarkCount').textContent = 
        `${bookmarks.length} bookmark${bookmarks.length !== 1 ? 's' : ''}`;
    }

    createBookmarkHTML(bookmark) {
      const isSelected = this.selectedBookmarks.has(bookmark.id);
      const faviconColor = this.getFaviconColor(bookmark.url);
      
      return `
        <div class="bookmark-card ${isSelected ? 'selected' : ''}" data-id="${bookmark.id}">
          <div class="selection-checkbox ${isSelected ? 'checked' : ''}" onclick="app.toggleSelect('${bookmark.id}')"></div>
          <div class="bookmark-header">
            <div class="bookmark-favicon" style="background-color: ${faviconColor.bg}; border-color: ${faviconColor.border}">
              <i class="${faviconColor.icon}" style="color: ${faviconColor.color}"></i>
            </div>
            <div class="bookmark-info">
              <h3 class="bookmark-title text-truncate">
                ${bookmark.favorite ? '<i class="fas fa-star" style="color: var(--warning); font-size: 0.875em;"></i>' : ''}
                ${this.escapeHtml(bookmark.title)}
              </h3>
              <a href="${this.escapeHtml(bookmark.url)}" class="bookmark-url text-truncate" target="_blank" onclick="app.incrementVisits('${bookmark.id}')">
                ${this.getDomain(bookmark.url)}
              </a>
            </div>
            <button class="action-menu" onclick="app.showBookmarkMenu('${bookmark.id}')">
              <i class="fas fa-ellipsis-v"></i>
            </button>
          </div>
          <p class="bookmark-description">${this.escapeHtml(bookmark.description)}</p>
          <div class="bookmark-tags">
            ${bookmark.tags.map(tag => `
              <span class="bookmark-tag" onclick="app.filterByTag('${tag}')">${this.escapeHtml(tag)}</span>
            `).join('')}
          </div>
          <div class="bookmark-footer">
            <div class="bookmark-stats">
              <div class="stat-item">
                <i class="far fa-calendar"></i>
                <span>${bookmark.added}</span>
              </div>
              <div class="stat-item">
                <i class="far fa-eye"></i>
                <span>${bookmark.visits} visit${bookmark.visits !== 1 ? 's' : ''}</span>
              </div>
            </div>
            <div class="footer-actions">
              <button class="footer-btn ${bookmark.favorite ? 'active' : ''}" onclick="app.toggleFavorite('${bookmark.id}')">
                <i class="${bookmark.favorite ? 'fas' : 'far'} fa-star"></i>
              </button>
              <button class="footer-btn ${bookmark.archived ? 'active' : ''}" onclick="app.toggleArchive('${bookmark.id}')">
                <i class="fas fa-archive"></i>
              </button>
            </div>
          </div>
        </div>
      `;
    }

    escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    getDomain(url) {
      try {
        return new URL(url).hostname.replace('www.', '');
      } catch {
        return url;
      }
    }

    getFaviconColor(url) {
      const domains = {
        'github.com': { icon: 'fab fa-github', color: '#333', bg: '#f3f4f6', border: '#d1d5db' },
        'twitter.com': { icon: 'fab fa-twitter', color: '#1da1f2', bg: '#f0f9ff', border: '#bae6fd' },
        'youtube.com': { icon: 'fab fa-youtube', color: '#ff0000', bg: '#fef2f2', border: '#fecaca' },
        'react.dev': { icon: 'fab fa-react', color: '#61dafb', bg: '#f0f9ff', border: '#bae6fd' },
        'frontendmentor.io': { icon: 'fas fa-code', color: '#3b82f6', bg: '#f0f9ff', border: '#bae6fd' },
        'claude.ai': { icon: 'fas fa-robot', color: '#8b5cf6', bg: '#faf5ff', border: '#e9d5ff' },
        'web.dev': { icon: 'fas fa-globe', color: '#0ea5e9', bg: '#f0f9ff', border: '#bae6fd' }
      };
      
      const domain = this.getDomain(url);
      return domains[domain] || { 
        icon: 'fas fa-globe', 
        color: '#10b981', 
        bg: '#f0fdf4', 
        border: '#bbf7d0' 
      };
    }

    addBookmark(data) {
      const bookmark = {
        id: Date.now().toString(),
        title: data.title,
        url: data.url,
        description: data.description || '',
        tags: data.tags || [],
        favorite: false,
        archived: false,
        visits: 0,
        added: new Date().toISOString().split('T')[0]
      };
      
      this.bookmarks.unshift(bookmark);
      this.saveBookmarks();
      this.renderBookmarks();
      this.showNotification('Bookmark added successfully!');
    }

    updateBookmark(id, data) {
      const index = this.bookmarks.findIndex(b => b.id === id);
      if (index !== -1) {
        this.bookmarks[index] = { ...this.bookmarks[index], ...data };
        this.saveBookmarks();
        this.renderBookmarks();
        this.showNotification('Bookmark updated successfully!');
      }
    }

    deleteBookmark(id) {
      this.bookmarks = this.bookmarks.filter(b => b.id !== id);
      this.saveBookmarks();
      this.renderBookmarks();
      this.showNotification('Bookmark deleted!');
    }

    toggleFavorite(id) {
      const bookmark = this.bookmarks.find(b => b.id === id);
      if (bookmark) {
        bookmark.favorite = !bookmark.favorite;
        this.saveBookmarks();
        this.renderBookmarks();
      }
    }

    toggleArchive(id) {
      const bookmark = this.bookmarks.find(b => b.id === id);
      if (bookmark) {
        bookmark.archived = !bookmark.archived;
        this.saveBookmarks();
        this.renderBookmarks();
      }
    }

    incrementVisits(id) {
      const bookmark = this.bookmarks.find(b => b.id === id);
      if (bookmark) {
        bookmark.visits = (bookmark.visits || 0) + 1;
        this.saveBookmarks();
      }
    }

    toggleSelect(id) {
      if (this.selectedBookmarks.has(id)) {
        this.selectedBookmarks.delete(id);
      } else {
        this.selectedBookmarks.add(id);
      }
      this.updateSelectionUI();
    }

    selectAll() {
      const bookmarks = this.getFilteredBookmarks();
      bookmarks.forEach(b => this.selectedBookmarks.add(b.id));
      this.updateSelectionUI();
    }

    clearSelection() {
      this.selectedBookmarks.clear();
      this.updateSelectionUI();
    }

    updateSelectionUI() {
      const selectedCount = this.selectedBookmarks.size;
      document.getElementById('selectedCount').textContent = selectedCount;
      
      // Update checkboxes
      document.querySelectorAll('.bookmark-card').forEach(card => {
        const id = card.dataset.id;
        const checkbox = card.querySelector('.selection-checkbox');
        if (this.selectedBookmarks.has(id)) {
          card.classList.add('selected');
          checkbox.classList.add('checked');
        } else {
          card.classList.remove('selected');
          checkbox.classList.remove('checked');
        }
      });
      
      // Show/hide bulk actions
      const bulkActions = document.getElementById('bulkActions');
      if (selectedCount > 0) {
        bulkActions.classList.add('active');
        document.body.classList.add('selection-mode');
      } else {
        bulkActions.classList.remove('active');
        document.body.classList.remove('selection-mode');
      }
    }

    bulkAction(action) {
      const ids = Array.from(this.selectedBookmarks);
      
      switch(action) {
        case 'favorite':
          ids.forEach(id => {
            const bookmark = this.bookmarks.find(b => b.id === id);
            if (bookmark) bookmark.favorite = true;
          });
          break;
        case 'archive':
          ids.forEach(id => {
            const bookmark = this.bookmarks.find(b => b.id === id);
            if (bookmark) bookmark.archived = true;
          });
          break;
        case 'delete':
          if (confirm(`Delete ${ids.length} bookmark${ids.length !== 1 ? 's' : ''}?`)) {
            ids.forEach(id => this.deleteBookmark(id));
          } else {
            return;
          }
          break;
      }
      
      this.saveBookmarks();
      this.renderBookmarks();
      this.clearSelection();
    }

    filterByTag(tag) {
      this.currentFilter = tag;
      document.querySelectorAll('.tag-item').forEach(item => {
        item.classList.remove('active');
        if (item.dataset.tag === tag) {
          item.classList.add('active');
        }
      });
      this.renderBookmarks();
    }

    updateTagsList() {
      // Collect all tags
      const allTags = new Set();
      this.bookmarks.forEach(bookmark => {
        bookmark.tags.forEach(tag => allTags.add(tag));
      });
      
      // Count tag usage
      const tagCounts = {};
      this.bookmarks.forEach(bookmark => {
        bookmark.tags.forEach(tag => {
          tagCounts[tag] = (tagCounts[tag] || 0) + 1;
        });
      });
      
      // Sort by count
      const sortedTags = Array.from(allTags).sort((a, b) => tagCounts[b] - tagCounts[a]);
      
      const tagsList = document.getElementById('tagsList');
      tagsList.innerHTML = `
        <div class="tag-item ${this.currentFilter === 'all' ? 'active' : ''}" data-tag="all" onclick="app.filterByTag('all')">
          <div class="tag-name">All</div>
          <div class="tag-count">${this.bookmarks.length}</div>
        </div>
        ${sortedTags.map(tag => `
          <div class="tag-item ${this.currentFilter === tag ? 'active' : ''}" data-tag="${tag}" onclick="app.filterByTag('${tag}')">
            <div class="tag-name">${tag}</div>
            <div class="tag-count">${tagCounts[tag]}</div>
          </div>
        `).join('')}
      `;
    }

    updateStats() {
      const total = this.bookmarks.length;
      const favorites = this.bookmarks.filter(b => b.favorite).length;
      const tags = new Set(this.bookmarks.flatMap(b => b.tags)).size;
      const recent = this.bookmarks.filter(b => {
        const weekAgo = new Date();
        weekAgo.setDate(weekAgo.getDate() - 7);
        return new Date(b.added) > weekAgo;
      }).length;
      
      // Update storage info
      document.getElementById('storageCount').textContent = `${total} bookmark${total !== 1 ? 's' : ''}`;
      const storageSize = (JSON.stringify(this.bookmarks).length / 1024 / 1024).toFixed(2);
      document.getElementById('storageSize').textContent = `${storageSize} MB`;
      const storagePercent = Math.min((total / 5000) * 100, 100); // 5000 bookmarks max
      document.getElementById('storageBar').style.width = `${storagePercent}%`;
      
      // Update stats modal
      document.getElementById('totalBookmarksStat').textContent = total;
      document.getElementById('favoriteBookmarksStat').textContent = favorites;
      document.getElementById('totalTagsStat').textContent = tags;
      document.getElementById('recentBookmarksStat').textContent = recent;
      
      // Update tag cloud
      const tagCloud = document.getElementById('tagCloud');
      const tagCounts = {};
      this.bookmarks.forEach(bookmark => {
        bookmark.tags.forEach(tag => {
          tagCounts[tag] = (tagCounts[tag] || 0) + 1;
        });
      });
      
      const sortedTags = Object.entries(tagCounts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      tagCloud.innerHTML = sortedTags.map(([tag, count]) => `
        <span class="bookmark-tag" onclick="app.filterByTag('${tag}')">
          ${tag} <small>(${count})</small>
        </span>
      `).join('');
    }

    exportBookmarks(format) {
      const data = this.bookmarks;
      let content, mimeType, fileName;
      
      switch(format) {
        case 'html':
          content = this.generateHTMLExport(data);
          mimeType = 'text/html';
          fileName = 'bookmarks.html';
          break;
        case 'json':
          content = JSON.stringify(data, null, 2);
          mimeType = 'application/json';
          fileName = 'bookmarks.json';
          break;
        case 'csv':
          content = this.generateCSVExport(data);
          mimeType = 'text/csv';
          fileName = 'bookmarks.csv';
          break;
        case 'markdown':
          content = this.generateMarkdownExport(data);
          mimeType = 'text/markdown';
          fileName = 'bookmarks.md';
          break;
      }
      
      const blob = new Blob([content], { type: mimeType });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fileName;
      a.click();
      URL.revokeObjectURL(url);
      
      this.showNotification(`Exported ${data.length} bookmarks as ${format.toUpperCase()}`);
    }

    generateHTMLExport(bookmarks) {
      const date = new Date().toLocaleDateString();
      return `
<!DOCTYPE NETSCAPE-Bookmark-file-1>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks exported from MarkFlow</TITLE>
<H1>MarkFlow Bookmarks</H1>
<DL><p>
  <DT><H3>Exported on ${date}</H3>
${bookmarks.map(b => `
  <DT><A HREF="${b.url}" ADD_DATE="${Math.floor(Date.now()/1000)}" TAGS="${b.tags.join(',')}">${b.title}</A>
  <DD>${b.description}
`).join('')}
</DL><p>
      `;
    }

    generateCSVExport(bookmarks) {
      const headers = ['Title', 'URL', 'Description', 'Tags', 'Favorite', 'Visits', 'Added'];
      const rows = bookmarks.map(b => [
        `"${b.title.replace(/"/g, '""')}"`,
        `"${b.url}"`,
        `"${b.description.replace(/"/g, '""')}"`,
        `"${b.tags.join(',')}"`,
        b.favorite ? 'Yes' : 'No',
        b.visits,
        b.added
      ]);
      
      return [headers, ...rows].map(row => row.join(',')).join('\n');
    }

    generateMarkdownExport(bookmarks) {
      return `# MarkFlow Bookmarks

Exported on ${new Date().toLocaleDateString()}

${bookmarks.map(b => `
## ${b.title}

**URL:** ${b.url}

**Description:** ${b.description}

**Tags:** ${b.tags.map(t => `\`${t}\``).join(', ')}

**Visits:** ${b.visits} | **Added:** ${b.added} | **Favorite:** ${b.favorite ? '⭐' : 'No'}

---
`).join('\n')}`;
    }

    importBookmarks(file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const content = e.target.result;
          let imported;
          
          if (file.name.endsWith('.json')) {
            imported = JSON.parse(content);
          } else if (file.name.endsWith('.html')) {
            imported = this.parseHTMLBookmarks(content);
          }
          
          if (Array.isArray(imported)) {
            imported.forEach(b => {
              b.id = Date.now() + Math.random().toString(36).substr(2, 9);
              b.added = b.added || new Date().toISOString().split('T')[0];
              b.visits = b.visits || 0;
              b.favorite = b.favorite || false;
              b.archived = b.archived || false;
            });
            
            this.bookmarks = [...imported, ...this.bookmarks];
            this.saveBookmarks();
            this.renderBookmarks();
            this.showNotification(`Imported ${imported.length} bookmarks!`);
          }
        } catch (error) {
          alert('Error importing bookmarks: ' + error.message);
        }
      };
      reader.readAsText(file);
    }

    parseHTMLBookmarks(html) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      const links = doc.querySelectorAll('a');
      const bookmarks = [];
      
      links.forEach(link => {
        bookmarks.push({
          title: link.textContent.trim(),
          url: link.href,
          description: link.nextSibling?.textContent?.trim() || '',
          tags: (link.getAttribute('tags') || '').split(',').filter(t => t),
          added: new Date().toISOString().split('T')[0],
          visits: 0,
          favorite: false,
          archived: false
        });
      });
      
      return bookmarks;
    }

    showBookmarkMenu(id) {
      // In a real app, show a context menu
      const bookmark = this.bookmarks.find(b => b.id === id);
      const actions = [
        { label: bookmark.favorite ? 'Remove from favorites' : 'Add to favorites', action: () => this.toggleFavorite(id) },
        { label: bookmark.archived ? 'Unarchive' : 'Archive', action: () => this.toggleArchive(id) },
        { label: 'Edit', action: () => this.editBookmark(id) },
        { label: 'Delete', action: () => this.deleteBookmark(id) }
      ];
      
      // For now, just show a simple menu
      const action = prompt(`Actions for "${bookmark.title}":\n1. ${actions[0].label}\n2. ${actions[1].label}\n3. ${actions[2].label}\n4. ${actions[3].label}\n\nEnter number (1-4):`);
      
      if (action && actions[parseInt(action) - 1]) {
        actions[parseInt(action) - 1].action();
      }
    }

    editBookmark(id) {
      const bookmark = this.bookmarks.find(b => b.id === id);
      if (!bookmark) return;
      
      this.editingBookmark = bookmark;
      document.getElementById('modalTitle').textContent = 'Edit Bookmark';
      document.getElementById('bookmarkTitle').value = bookmark.title;
      document.getElementById('bookmarkUrl').value = bookmark.url;
      document.getElementById('bookmarkDescription').value = bookmark.description;
      
      // Clear and rebuild tags
      const tagContainer = document.getElementById('tagInputContainer');
      tagContainer.innerHTML = '';
      bookmark.tags.forEach(tag => this.addTagToInput(tag));
      tagContainer.innerHTML += '<input type="text" class="tag-input" id="tagInput" placeholder="Type and press Enter...">';
      
      document.getElementById('bookmarkModal').classList.add('active');
    }

    addTagToInput(tag) {
      const container = document.getElementById('tagInputContainer');
      const tagPill = document.createElement('div');
      tagPill.className = 'tag-pill';
      tagPill.innerHTML = `
        ${tag}
        <span class="remove-tag" onclick="this.parentElement.remove()">×</span>
      `;
      container.insertBefore(tagPill, container.querySelector('.tag-input'));
    }

    getTagsFromInput() {
      const tagPills = document.querySelectorAll('#tagInputContainer .tag-pill');
      return Array.from(tagPills).map(pill => pill.textContent.trim().slice(0, -1)); // Remove ×
    }

    showNotification(message) {
      // Create notification element
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--primary);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-lg);
        z-index: 10000;
        animation: slideIn 0.3s ease;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    setupEventListeners() {
      // Mobile menu
      document.getElementById('mobileMenuBtn').addEventListener('click', () => {
        document.getElementById('sidebar').classList.add('active');
        document.getElementById('sidebarOverlay').classList.add('active');
      });
      
      document.getElementById('sidebarOverlay').addEventListener('click', () => {
        document.getElementById('sidebar').classList.remove('active');
        document.getElementById('sidebarOverlay').classList.remove('active');
      });
      
      // Navigation
      document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
          link.classList.add('active');
          
          this.currentView = link.dataset.view;
          this.currentFilter = 'all';
          this.renderBookmarks();
          
          // Update page title
          const titles = {
            'all': 'All Bookmarks',
            'favorites': 'Favorites',
            'archived': 'Archived',
            'recent': 'Recently Added'
          };
          document.getElementById('pageTitle').textContent = titles[this.currentView] || 'Bookmarks';
          
          // Close mobile menu
          if (window.innerWidth <= 768) {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('sidebarOverlay').classList.remove('active');
          }
        });
      });
      
      // Search
      document.getElementById('searchInput').addEventListener('input', (e) => {
        this.searchQuery = e.target.value;
        this.renderBookmarks();
      });
      
      // Add bookmark button
      document.getElementById('addBookmarkBtn').addEventListener('click', () => {
        this.editingBookmark = null;
        document.getElementById('modalTitle').textContent = 'Add New Bookmark';
        document.getElementById('bookmarkForm').reset();
        document.getElementById('tagInputContainer').innerHTML = '<input type="text" class="tag-input" id="tagInput" placeholder="Type and press Enter...">';
        document.getElementById('bookmarkModal').classList.add('active');
      });
      
      document.getElementById('addFirstBookmark').addEventListener('click', () => {
        document.getElementById('addBookmarkBtn').click();
      });
      
      // Tag input
      document.addEventListener('click', (e) => {
        if (e.target.id === 'tagInput') {
          e.target.focus();
        }
      });
      
      document.addEventListener('keydown', (e) => {
        if (e.target.id === 'tagInput' && e.key === 'Enter') {
          e.preventDefault();
          const tag = e.target.value.trim();
          if (tag) {
            this.addTagToInput(tag);
            e.target.value = '';
          }
        }
      });
      
      // Bookmark form
      document.getElementById('bookmarkForm').addEventListener('submit', (e) => {
        e.preventDefault();
        
        const data = {
          title: document.getElementById('bookmarkTitle').value.trim(),
          url: document.getElementById('bookmarkUrl').value.trim(),
          description: document.getElementById('bookmarkDescription').value.trim(),
          tags: this.getTagsFromInput()
        };
        
        if (this.editingBookmark) {
          this.updateBookmark(this.editingBookmark.id, data);
        } else {
          this.addBookmark(data);
        }
        
        document.getElementById('bookmarkModal').classList.remove('active');
      });
      
      // Modal cancel buttons
      document.getElementById('cancelModal').addEventListener('click', () => {
        document.getElementById('bookmarkModal').classList.remove('active');
      });
      
      // Quick actions
      document.getElementById('importBtn').addEventListener('click', () => {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json,.html';
        input.onchange = (e) => this.importBookmarks(e.target.files[0]);
        input.click();
      });
      
      document.getElementById('exportBtn').addEventListener('click', () => {
        this.exportFormat = 'json';
        document.querySelectorAll('.export-option').forEach(opt => opt.classList.remove('selected'));
        document.querySelector('.export-option[data-format="json"]').classList.add('selected');
        document.getElementById('exportModal').classList.add('active');
      });
      
      document.getElementById('selectBtn').addEventListener('click', () => {
        if (this.selectedBookmarks.size > 0) {
          this.clearSelection();
        } else {
          this.selectAll();
        }
      });
      
      // Export modal
      document.querySelectorAll('.export-option').forEach(option => {
        option.addEventListener('click', () => {
          this.exportFormat = option.dataset.format;
          document.querySelectorAll('.export-option').forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
        });
      });
      
      document.getElementById('confirmExport').addEventListener('click', () => {
        this.exportBookmarks(this.exportFormat);
        document.getElementById('exportModal').classList.remove('active');
      });
      
      document.getElementById('cancelExport').addEventListener('click', () => {
        document.getElementById('exportModal').classList.remove('active');
      });
      
      // Bulk actions
      document.getElementById('bulkFavoriteBtn').addEventListener('click', () => {
        this.bulkAction('favorite');
      });
      
      document.getElementById('bulkArchiveBtn').addEventListener('click', () => {
        this.bulkAction('archive');
      });
      
      document.getElementById('bulkDeleteBtn').addEventListener('click', () => {
        this.bulkAction('delete');
      });
      
      document.getElementById('bulkCancelBtn').addEventListener('click', () => {
        this.clearSelection();
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        // Ctrl/Cmd + K to focus search
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
          e.preventDefault();
          document.getElementById('searchInput').focus();
        }
        
        // Ctrl/Cmd + N to add new bookmark
        if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
          e.preventDefault();
          document.getElementById('addBookmarkBtn').click();
        }
        
        // Escape to clear selection or close modals
        if (e.key === 'Escape') {
          if (this.selectedBookmarks.size > 0) {
            this.clearSelection();
          } else {
            document.querySelectorAll('.modal.active').forEach(modal => {
              modal.classList.remove('active');
            });
          }
        }
      });
    }
  }

  // Initialize the application
  const app = new BookmarkManager();
  window.app = app; // Make app global for inline event handlers

  // Add CSS for notifications
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
  `;
  document.head.appendChild(style);

  // PWA Support
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      // In a real app, you would register a service worker here
      console.log('PWA ready - service worker would be registered');
    });
  }

  // Install prompt
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    // Show install button
    const installBtn = document.createElement('button');
    installBtn.className = 'action-btn';
    installBtn.innerHTML = '<i class="fas fa-download"></i> Install App';
    installBtn.style.marginRight = '0.5rem';
    installBtn.onclick = () => {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(() => {
        deferredPrompt = null;
        installBtn.remove();
      });
    };
    
    document.querySelector('.quick-actions').prepend(installBtn);
  });
</script>
</body>
</html>